Import('env getObjects platform getBinName getLibName')

if platform == 'posix':
	env = env.Copy()
	env.Append(LIBS = Split("""
	        omfggui omfgconsole omfgloaders omfglua glua
	        png12 z fmod
	        alleg-4.1.15 m
	        pthread 
	        Xpm
	        Xext X11 dl
	        loadpng zoidcom boost_filesystem-gcc boost_signals-gcc""")
		)
elif platform == 'mingw-cross':
	env = env.Copy(LIBS = Split("""
	        omfggui omfgconsole omfgloaders omfglua glua
	        loadpng png13 z fmod
	        alleg zoidcom_mw boost_filesystem-mgw boost_signals-mgw""")
		)
if platform == 'basara':
	env = env.Copy(LIBS = Split("""
	        omfggui omfgconsole omfgloaders omfglua glua
	        png12 z fmod
	        alleg-4.2.0 alleg_unsharable
	        loadpng zoidcom boost_filesystem-gcc boost_signals-gcc"""),
	        LINKFLAGS = '-Wl,--export-dynamic'
		)
# add more platforms here

# Xxf86dga Xxf86vm

SConscript(['./loaders/SConscript', './lua/SConscript'], exports = ['env', 'getObjects', 'getLibName', 'platform'])

env.Program(getBinName('gusanos'), getObjects(env))